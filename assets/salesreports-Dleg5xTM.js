import{r,j as e,z as C,ae as k,v as V,F as v,Y as D,_ as E,$ as d,I as Y,J as $,K as z,M as P,O as n,Q as H}from"./index-B24U4oXx.js";import{d as J,T as K,E as G,u as j,w as U}from"./PictureAsPdf-7dlLabor.js";import{d as X}from"./Description-BXN-XfhQ.js";import{C as Z}from"./Container-Dltl4W0f.js";const ne=()=>{const[u,R]=r.useState(""),[p,F]=r.useState(""),[o,q]=r.useState(""),[h,B]=r.useState(""),[S]=r.useState([{id:1,date:"2024-09-01",itemType:"Retail Sale",category:"Electronics",amount:2e3,quantity:5},{id:2,date:"2024-09-05",itemType:"Bulk Sale",category:"Clothing",amount:1500,quantity:3},{id:3,date:"2024-09-10",itemType:"Retail Sale",category:"Furniture",amount:3e3,quantity:2},{id:4,date:"2024-09-12",itemType:"Bulk Sale",category:"Stationery",amount:800,quantity:10},{id:5,date:"2024-09-15",itemType:"Retail Sale",category:"Electronics",amount:2200,quantity:4},{id:6,date:"2024-09-20",itemType:"Bulk Sale",category:"Clothing",amount:1800,quantity:6}]),[l,_]=r.useState(S),[y,f]=r.useState(0),[x,I]=r.useState(5),[m,A]=r.useState("asc"),[i,W]=r.useState("date"),M=()=>{if(l.length===0){alert("No data to export");return}const t=new G;t.text("Sales Report",14,10),t.autoTable({head:[["Date","Item Type","Category","Amount","Quantity"]],body:l.map(a=>[a.date,a.itemType,a.category,a.amount.toFixed(2),a.quantity]),startY:20}),t.save("sales_report.pdf")},O=()=>{if(l.length===0){alert("No data to export");return}const t=j.json_to_sheet(l.map(s=>({Date:s.date,"Item Type":s.itemType,Category:s.category,Amount:s.amount.toFixed(2),Quantity:s.quantity}))),a=j.book_new();j.book_append_sheet(a,t,"Sale Tax Report"),U(a,"sale_report.xlsx")},Q=t=>{B(t.target.value),t.target.value==="pdf"?M():t.target.value==="excel"&&O()},w=()=>{const t=new Date(u),a=new Date(p),s=S.filter(b=>{const T=new Date(b.date),N=(!u||T>=t)&&(!p||T<=a),L=!o||b.itemType===o;return N&&L});_(s)},c=t=>{A(i===t&&m==="asc"?"desc":"asc"),W(t)},g=l.slice().sort((t,a)=>t[i]<a[i]?m==="asc"?-1:1:t[i]>a[i]?m==="asc"?1:-1:0);return r.useEffect(()=>{w()},[u,p,o]),e.jsx(Z,{maxWidth:"lg",sx:{marginTop:4},children:e.jsxs(C,{elevation:3,sx:{padding:4,backgroundColor:"#f9dff5"},children:[e.jsx(k,{variant:"h4",gutterBottom:!0,align:"center",color:"purple",children:"Sales Report"}),e.jsxs(V,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2,marginBottom:3},children:[e.jsx(v,{label:"Start Date",type:"date",value:u,onChange:t=>R(t.target.value),InputLabelProps:{shrink:!0},sx:{minWidth:150}}),e.jsx(v,{label:"End Date",type:"date",value:p,onChange:t=>F(t.target.value),InputLabelProps:{shrink:!0},sx:{minWidth:150}}),e.jsx(D,{sx:{minWidth:150},children:e.jsxs(E,{value:o,onChange:t=>q(t.target.value),displayEmpty:!0,renderValue:()=>o||"Select Sale Type",children:[e.jsx(d,{value:"",children:"All Types"}),e.jsx(d,{value:"Retail Sale",children:"Retail Sale"}),e.jsx(d,{value:"Bulk Sale",children:"Bulk Sale"})]})}),e.jsx(D,{sx:{minWidth:150},children:e.jsxs(E,{value:h,onChange:Q,displayEmpty:!0,renderValue:()=>h||"Export As",children:[e.jsxs(d,{value:"pdf",children:[e.jsx(J,{sx:{marginRight:1,color:"red"}}),"PDF"]}),e.jsxs(d,{value:"excel",children:[e.jsx(X,{sx:{marginRight:1,color:"green"}}),"Excel"]})]})})]}),g.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{component:C,sx:{marginTop:4,backgroundColor:"#f4c4ec"},children:e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(P,{children:[e.jsx(n,{onClick:()=>c("date"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Date"})}),e.jsx(n,{onClick:()=>c("itemType"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Item Type"})}),e.jsx(n,{onClick:()=>c("category"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Category"})}),e.jsx(n,{align:"right",onClick:()=>c("amount"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Amount"})}),e.jsx(n,{align:"right",onClick:()=>c("quantity"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Quantity"})})]})}),e.jsx(H,{children:g.slice(y*x,y*x+x).map(t=>e.jsxs(P,{children:[e.jsx(n,{children:t.date}),e.jsx(n,{children:t.itemType}),e.jsx(n,{children:t.category}),e.jsx(n,{align:"right",children:t.amount.toFixed(2)}),e.jsx(n,{align:"right",children:t.quantity})]},t.id))})]})}),e.jsx(K,{rowsPerPageOptions:[5,10,25],component:"div",count:g.length,rowsPerPage:x,page:y,onPageChange:(t,a)=>f(a),onRowsPerPageChange:t=>{I(parseInt(t.target.value,10)),f(0)},sx:{marginTop:2}})]}),g.length===0&&e.jsx(k,{variant:"h6",color:"error",align:"center",children:"No data found"})]})})};export{ne as default};
